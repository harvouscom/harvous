---
import SquareButtonReact from "./react/SquareButton";

export interface Props {
  variant?: "Add" | "Close" | "More" | "Back" | "Find";
  withMenu?: boolean;
  type?: "button" | "submit" | "reset";
  contentType?: "thread" | "note" | "space" | "dashboard" | "profile";
  contentId?: string;
  onClick?: () => void;
  className?: string;
}

const { variant = "More", withMenu = false, type = "button", contentType = "dashboard", contentId, onClick, className } = Astro.props;

// For Find variant, wrap in anchor tag (backward compatibility)
// For all other variants, use React SquareButton directly
---

{variant === "Find" ? (
  <a href="/search" class="block">
    <SquareButtonReact
      variant={variant}
      withMenu={withMenu}
      type={type}
      contentType={contentType}
      contentId={contentId}
      onClick={onClick}
      className={className}
      client:only="react"
    />
  </a>
) : (
  <SquareButtonReact
    variant={variant}
    withMenu={withMenu}
    type={type}
    contentType={contentType}
    contentId={contentId}
    onClick={onClick}
    className={className}
    client:only="react"
  />
)}

<style>
  /* Preserve button styles from original SquareButton.astro */
  /* Menu positioning styles moved to global.css for React component compatibility */
  
  button[data-outer-shadow] {
    will-change: transform, box-shadow;
    transition:
      background-color 0.125s ease-in-out,
      box-shadow 0.125s ease-in-out;
    box-shadow:
      0px -8px 0px 0px hsla(0, 0%, 0%, 0.1) inset,
      0px 4px 4px 0px hsla(0, 0%, 0%, 0.25);
  }
  
  button:not([data-outer-shadow]) {
    transition:
      box-shadow 0.125s ease-in-out;
    box-shadow: 0px -3px 0px 0px #78766F33 inset;
  }

  button:not([data-outer-shadow]):active {
    filter: brightness(0.97);
    box-shadow: 
      0px -1px 0px 0px #78766F33 inset,
      0px 1px 0px 0px #78766F33 inset;
  }

  button {
    will-change: transform, box-shadow;
  }

  button:active > img {
    transform: scale(0.95);
  }

  button:active[class*="bg-[var(--color-bold-blue)]"] {
    background-color: var(--color-navy);
    box-shadow:
      0px -4px 0px 0px #0000001a inset,
      0px 0px 4px 0px #00000040,
      0px 4px 0px 0px #00000040 inset;
  }

  button:active[class*="bg-[var(--color-stone-grey)]"] {
    background-color: var(--color-deep-grey);
    box-shadow:
      0px -4px 0px 0px #0000001a inset,
      0px 0px 4px 0px #00000040,
      0px 4px 0px 0px #00000040 inset;
  }
</style>
