---
interface Props {
    open: boolean;
    title: string;
    description: string;
}

const { title, description, open } = Astro.props;
---

<div
  x-data="{ isOpen: false }"
  x-show="isOpen"
  x-on:keydown.escape.window="isOpen = false"
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="transition ease-in duration-200"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"
  x-cloak
  class="fixed inset-0 z-50 flex items-end md:items-center justify-center"
  role="dialog"
  aria-modal="true"
  aria-labelledby="drawer-title"
  aria-describedby="drawer-description"
  x-init={`
    (function () {
      $watch("isOpen", value => isOpen = value);
      isOpen = ${Boolean(open)};
    })()
  `}
>
  <!-- Overlay -->
  <div
      x-show="isOpen"
      x-transition:enter="transition-opacity ease-out duration-300"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
      x-transition:leave="transition-opacity ease-in duration-200"
      x-transition:leave-start="opacity-100"
      x-transition:leave-end="opacity-0"
      x-on:click="isOpen = false"
      class="absolute inset-0 bg-black/50 backdrop-blur-sm"
      aria-hidden="true"
  ></div>

  <!-- Drawer/Modal Panel -->
  <div
      x-show="isOpen"
      x-transition:enter="transition ease-out duration-300"
      x-transition:enter-start="opacity-0 translate-y-full md:translate-y-0 md:scale-95"
      x-transition:enter-end="opacity-100 translate-y-0 md:scale-100"
      x-transition:leave="transition ease-in duration-200"
      x-transition:leave-start="opacity-100 translate-y-0 md:scale-100"
      x-transition:leave-end="opacity-0 translate-y-full md:translate-y-0 md:scale-95"
      class="relative bg-white dark:bg-gray-900 rounded-t-lg md:rounded-lg shadow-xl w-full max-w-md overflow-hidden"
      x-trap.inert.noscroll="isOpen"
  >
    <div class="px-4 py-5 sm:px-6 flex justify-between items-center border-b border-gray-200 dark:border-gray-700">
      <h2 id="drawer-title" class="text-lg font-semibold text-gray-900 dark:text-white">
          {title}
      </h2>
      <button
        x-on:click="isOpen = false"
        type="button"
        class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900 rounded-md"
      >
        <span class="sr-only">Close</span>
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div class="px-4 py-5 sm:p-6">
        <!-- Description -->
        <p id="drawer-description" class="text-sm text-gray-600 dark:text-gray-400 mb-4">
            {description}
        </p>
        <!-- Content Slot -->
        <slot />
    </div>
  </div>
</div>
