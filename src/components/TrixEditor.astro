---
interface Props {
  alpineRefName?: string;
  content: string;
  id?: string;
  name?: string;
  placeholder?: string;
  toolbar?: string;
}

const { 
  content, 
  id = "content", 
  name = "content", 
  alpineRefName = "contentInputEl",
  placeholder = "Write something...",
  toolbar = "",
  ...props
} = Astro.props as Props;
---

<!-- @TODO - Style for ul and ol -->

<div id="trix-editor" class="relative not-prose h-full">
  <input {...props} required id={id} x-ref={alpineRefName} value={content} type="hidden" name={name} />
  <trix-editor {...props} class="trix-content h-full" toolbar={toolbar} placeholder={placeholder} input={id}></trix-editor>
</div>

<style>
    /* This is needed to use Tailwind's @apply in v5 */
    @reference "@/styles/global.css";

    #trix-editor {
      @apply h-full flex flex-col;
    }

    #trix-editor trix-editor {
      @apply resize-none bg-[var(--color-fog-white)] py-3 px-3 rounded-xl border-none flex-1 flex flex-col gap-4 min-h-[200px] overflow-y-auto;
    }

    /* Styles for bullet points and numbered lists */
    #trix-editor trix-editor ul {
      list-style-type: disc;
      padding-left: 1.5em;
      margin: 0.5em 0;
    }

    #trix-editor trix-editor ol {
      list-style-type: decimal;
      padding-left: 1.5em;
      margin: 0.5em 0;
    }

    #trix-editor trix-editor li {
      display: list-item;
      margin-bottom: 0.25em;
    }

    #trix-editor trix-editor ul li {
      list-style-type: disc;
    }

    #trix-editor trix-editor ol li {
      list-style-type: decimal;
    }
</style>

<script>
  import "trix";
</script>
