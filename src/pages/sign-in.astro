---
import EmptyLayout from "@/layouts/EmptyLayout.astro";
import { SignIn as ClerkSignIn } from "@clerk/astro/components";
---

<EmptyLayout title="Sign In">
  <div class="min-h-screen bg-[var(--color-light-paper)] flex items-center justify-center p-6">
    <div class="w-full max-w-md">
      <ClerkSignIn
        appearance={{
          elements: {
            rootBox: "w-full",
            card: "bg-white rounded-2xl shadow-lg p-8 shadow-none",
            headerTitle: "text-2xl font-bold text-[var(--color-deep-grey)]",
            headerSubtitle: "text-[var(--color-stone-grey)]",
            formField: "!mb-3",
            formButtonPrimary: "group relative rounded-3xl cursor-pointer transition-[scale,shadow] duration-300 pb-7 pt-6 px-6 flex items-center justify-center font-sans font-semibold text-[18px] leading-[0] text-nowrap text-[var(--color-fog-white)] min-h-[60px] w-full primary-button",
            formFieldInput: "rounded-3xl py-5 px-4 min-h-[64px] bg-transparent border-none text-[18px] font-semibold text-[var(--color-deep-grey)] text-center placeholder:text-[var(--color-pebble-grey)] focus:outline-none focus:ring-0",
            formFieldLabel: "hidden",
            footerActionLink: "text-[var(--color-bold-blue)] hover:text-[var(--color-bold-blue)]/80 font-medium",
            dividerLine: "bg-gray-200",
            dividerText: "text-[var(--color-stone-grey)] bg-white px-4"
          },
          variables: {
            colorPrimary: "var(--color-bold-blue)"
          }
        }}
        signUpUrl="/sign-up"
        redirectUrl="/"
      />
    </div>
  </div>
</EmptyLayout>

<style>
  .primary-button {
    background-color: var(--color-bold-blue) !important;
    will-change: transform, box-shadow;
    transition:
      background-color 0.125s ease-in-out,
      box-shadow 0.125s ease-in-out;
    box-shadow:
      0px -8px 0px 0px hsla(0, 0%, 0%, 0.1) inset,
      0px 4px 4px 0px hsla(0, 0%, 0%, 0.25);
  }

  .primary-button:hover {
    background-color: var(--color-bold-blue) !important;
  }

  .primary-button:active {
    transform: scale(0.98);
    background-color: var(--color-navy) !important;
    box-shadow:
      0px -4px 0px 0px #0000001a inset,
      0px 0px 4px 0px #00000040,
      0px 4px 0px 0px #00000040 inset;
  }

  .primary-button:active > * {
    translate: 0 0;
    transform: scale(0.98);
  }

  /* Hide any arrow/icon in the primary button - comprehensive approach */
  .primary-button svg,
  .primary-button img,
  .primary-button [class*="icon"],
  .primary-button [class*="arrow"],
  .primary-button [class*="Icon"],
  .primary-button [class*="Arrow"],
  .primary-button::after,
  .primary-button::before,
  .primary-button *::after,
  .primary-button *::before {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    width: 0 !important;
    height: 0 !important;
    content: none !important;
  }

  /* Hide Clerk's icon wrapper if it exists */
  .primary-button [data-clerk-element="icon"],
  .primary-button [class*="clerk-icon"],
  .primary-button [class*="button-icon"],
  .primary-button [data-clerk-element="buttonIcon"] {
    display: none !important;
  }

  /* Hide any child element that's not the main text content - be more specific */
  .primary-button > span:not(:first-of-type),
  .primary-button > div:not(:first-of-type) {
    display: none !important;
  }

  /* Target any element containing arrow-like content using :has() */
  .primary-button *:has(> svg),
  .primary-button *:has(> img),
  .primary-button *[aria-label*="arrow"],
  .primary-button *[aria-label*="icon"],
  .primary-button *[role="img"] {
    display: none !important;
  }

  /* Hide any element that's a sibling after the text - but preserve first child text */
  .primary-button > *:nth-child(2),
  .primary-button > *:nth-child(3) {
    display: none !important;
    visibility: hidden !important;
  }

  /* Hide any span or div that comes after the first child */
  .primary-button span + span,
  .primary-button div + div,
  .primary-button span + div,
  .primary-button div + span {
    display: none !important;
  }

  /* Ensure button text is centered and visible - hide arrow if it's in the text */
  .primary-button {
    justify-content: center !important;
  }

  .primary-button > *:first-child {
    margin: 0 auto !important;
  }

  /* Hide arrow Unicode characters that might be in button text */
  .primary-button::after {
    content: "" !important;
    display: none !important;
  }

  /* Try to hide arrow using content replacement if it's a pseudo-element */
  .primary-button > *:first-child::after {
    content: "" !important;
    display: none !important;
  }

  /* Style input fields to match app's search-input style */
  :global(input[type="email"]),
  :global(input[type="password"]),
  :global(input[type="text"]) {
    background: var(--color-gradient-gray) !important;
    box-shadow: var(--shadow-small) !important;
  }

  /* Set spacing between form elements to exactly 12px - override all defaults */
  :global([data-clerk-element="formField"]) {
    margin-bottom: 12px !important;
    margin-top: 0 !important;
    padding-bottom: 0 !important;
    padding-top: 0 !important;
  }

  /* Spacing between header subtitle and first input */
  :global([data-clerk-element="headerSubtitle"]) {
    margin-bottom: 12px !important;
    margin-top: 0 !important;
  }

  /* Remove any extra spacing from form container */
  :global([data-clerk-element="form"]) {
    gap: 0 !important;
    row-gap: 12px !important;
  }

  /* Remove default margins from header */
  :global([data-clerk-element="header"]) {
    margin-bottom: 0 !important;
  }

  :global([data-clerk-element="headerTitle"]) {
    margin-bottom: 0 !important;
  }

  /* Hide Clerk's button icon classes */
  :global(.cl-buttonIcon),
  :global(.cl-signInButtonIcon),
  :global([class*="buttonIcon"]),
  :global([class*="ButtonIcon"]) {
    display: none !important;
    visibility: hidden !important;
    width: 0 !important;
    height: 0 !important;
  }
</style>
