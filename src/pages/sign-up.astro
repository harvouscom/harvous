---
import EmptyLayout from "@/layouts/EmptyLayout.astro";
import { SignUp } from "@clerk/astro/components";
---

<EmptyLayout title="Sign Up">
  <div class="min-h-screen p-3 min-[1160px]:p-6">
    <div class="h-[100svh] flex gap-6">
      <!-- Left Column: Sunset to Dusk Gradient -->
      <div class="hidden lg:flex lg:w-1/2 sunset-dusk-gradient relative overflow-hidden rounded-[12px]">
        <div class="relative z-10 flex flex-col p-3 min-[1160px]:p-6 w-full h-full">
          <!-- Back to home link with SpaceButton styling -->
          <a 
            href="https://harvous.com" 
            class="space-button-link relative rounded-xl h-[64px] cursor-pointer transition-[scale,shadow] duration-300 px-4 inline-flex items-center justify-start w-fit"
          >
            <div class="flex items-center justify-start relative w-full h-full pl-2 pr-2 transition-transform duration-125 min-w-0">
              <svg class="w-5 h-5 mr-2 flex-shrink-0" fill="none" stroke="var(--color-deep-grey)" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
              </svg>
              <span class="font-sans text-[18px] font-semibold text-[var(--color-deep-grey)] whitespace-nowrap">
                Back to harvous
              </span>
            </div>
          </a>
        </div>
      </div>

      <!-- Right Column: Sign Up Form -->
      <div class="flex-1 flex items-center justify-center bg-[var(--color-light-paper)]">
        <div class="w-full max-w-md mx-auto p-3 min-[1160px]:p-6">
        <!-- Back to home link (mobile only) -->
        <a 
          href="https://harvous.com" 
          class="lg:hidden inline-flex items-center text-[var(--color-stone-grey)] hover:text-[var(--color-deep-grey)] transition-colors mb-6"
        >
          <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          Back to home
        </a>

        <SignUp
            appearance={{
              elements: {
                rootBox: "w-full",
                card: "bg-white rounded-2xl shadow-lg p-8 shadow-none",
                headerTitle: "text-2xl font-bold text-[var(--color-deep-grey)]",
                headerSubtitle: "text-[var(--color-stone-grey)]",
                formField: "mb-3",
                formButtonPrimary: "group relative rounded-3xl cursor-pointer transition-[scale,shadow] duration-300 pb-7 pt-6 px-6 flex items-center justify-center font-sans font-semibold text-[18px] leading-[0] text-nowrap text-[var(--color-fog-white)] min-h-[60px] w-full primary-button",
                formFieldInput: "rounded-3xl py-5 px-4 min-h-[64px] bg-transparent border-none text-[18px] font-semibold text-[var(--color-deep-grey)] text-center placeholder:text-[var(--color-pebble-grey)] focus:outline-none focus:ring-0",
                formFieldLabel: "hidden",
                footerActionLink: "text-[var(--color-bold-blue)] hover:text-[var(--color-bold-blue)]/80 font-medium",
                dividerLine: "bg-gray-200",
                dividerText: "text-[var(--color-stone-grey)] bg-white px-4"
              },
              variables: {
                colorPrimary: "var(--color-bold-blue)"
              }
            }}
            additionalOAuthScopes={{
              google: ['profile', 'email']
            }}
            additionalFields={[
              {
                name: 'first_name',
                label: 'First Name',
                required: true,
              },
              {
                name: 'last_name',
                label: 'Last Name',
                required: true,
              },
            ]}
            signInUrl="/sign-in"
            redirectUrl="/"
          />
        </div>
      </div>
    </div>
  </div>
</EmptyLayout>

<style>
  /* PRIMARY BUTTON STYLING - Match Button.astro component */
  /* Target all Clerk primary buttons including modals, error screens, etc. */
  .primary-button,
  :global(.cl-formButtonPrimary),
  :global(.cl-buttonPrimary),
  :global([class*="cl-buttonPrimary"]),
  :global([class*="cl-formButtonPrimary"]),
  :global(button[type="submit"][class*="cl-"]),
  :global(.cl-card button[type="submit"]),
  :global(.cl-modalContent button[type="submit"]),
  :global(.cl-alert button[type="submit"]) {
    background-color: var(--color-bold-blue) !important;
    will-change: transform, box-shadow !important;
    transition:
      background-color 0.125s ease-in-out,
      box-shadow 0.125s ease-in-out !important;
    box-shadow:
      0px -8px 0px 0px hsla(0, 0%, 0%, 0.1) inset,
      0px 4px 4px 0px hsla(0, 0%, 0%, 0.25) !important;
    border-radius: 1.5rem !important;
    min-height: 60px !important;
    font-weight: 600 !important;
    font-size: 18px !important;
    color: var(--color-fog-white) !important;
  }

  .primary-button:hover,
  :global(.cl-formButtonPrimary:hover),
  :global(.cl-buttonPrimary:hover),
  :global([class*="cl-buttonPrimary"]:hover),
  :global([class*="cl-formButtonPrimary"]:hover),
  :global(button[type="submit"][class*="cl-"]:hover),
  :global(.cl-card button[type="submit"]:hover),
  :global(.cl-modalContent button[type="submit"]:hover),
  :global(.cl-alert button[type="submit"]:hover) {
    background-color: var(--color-bold-blue) !important;
  }

  .primary-button:active,
  :global(.cl-formButtonPrimary:active),
  :global(.cl-buttonPrimary:active),
  :global([class*="cl-buttonPrimary"]:active),
  :global([class*="cl-formButtonPrimary"]:active),
  :global(button[type="submit"][class*="cl-"]:active),
  :global(.cl-card button[type="submit"]:active),
  :global(.cl-modalContent button[type="submit"]:active),
  :global(.cl-alert button[type="submit"]:active) {
    transform: scale(0.98) !important;
    background-color: var(--color-navy) !important;
    box-shadow:
      0px -4px 0px 0px #0000001a inset,
      0px 0px 4px 0px #00000040,
      0px 4px 0px 0px #00000040 inset !important;
  }

  .primary-button:active > *,
  :global(.cl-formButtonPrimary:active > *),
  :global(.cl-buttonPrimary:active > *),
  :global([class*="cl-buttonPrimary"]:active > *),
  :global([class*="cl-formButtonPrimary"]:active > *),
  :global(button[type="submit"][class*="cl-"]:active > *),
  :global(.cl-card button[type="submit"]:active > *),
  :global(.cl-modalContent button[type="submit"]:active > *),
  :global(.cl-alert button[type="submit"]:active > *) {
    translate: 0 0 !important;
    transform: scale(0.98) !important;
  }

  /* HIDE ARROW ICON - Comprehensive targeting of all Clerk button icons */
  .primary-button svg,
  .primary-button img,
  .primary-button [class*="icon"],
  .primary-button [class*="arrow"],
  .primary-button [class*="Icon"],
  .primary-button [class*="Arrow"],
  .primary-button::after,
  .primary-button::before,
  .primary-button *::after,
  .primary-button *::before,
  :global(.cl-formButtonPrimary svg),
  :global(.cl-formButtonPrimary img),
  :global(.cl-formButtonPrimary [class*="icon"]),
  :global(.cl-formButtonPrimary [class*="arrow"]),
  :global(.cl-formButtonPrimary [class*="Icon"]),
  :global(.cl-formButtonPrimary [class*="Arrow"]),
  :global(.cl-formButtonPrimary::after),
  :global(.cl-formButtonPrimary::before),
  :global(.cl-formButtonPrimary *::after),
  :global(.cl-formButtonPrimary *::before),
  :global(.cl-buttonIcon),
  :global(.cl-signUpButtonIcon),
  :global(.cl-signInButtonIcon),
  :global([class*="cl-buttonIcon"]),
  :global([class*="cl-icon"]),
  :global([class*="buttonIcon"]),
  :global([class*="ButtonIcon"]),
  :global(.cl-card button[type="submit"] svg),
  :global(.cl-modalContent button[type="submit"] svg),
  :global(.cl-alert button[type="submit"] svg) {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    width: 0 !important;
    height: 0 !important;
    content: none !important;
    font-size: 0 !important;
    line-height: 0 !important;
  }

  /* Hide any child elements that aren't the main text */
  .primary-button > *:nth-child(n+2),
  :global(.cl-formButtonPrimary > *:nth-child(n+2)) {
    display: none !important;
    visibility: hidden !important;
  }

  /* Hide sibling elements after first child */
  .primary-button span + *,
  .primary-button div + *,
  :global(.cl-formButtonPrimary span + *),
  :global(.cl-formButtonPrimary div + *) {
    display: none !important;
  }

  /* Ensure button text is centered */
  .primary-button,
  :global(.cl-formButtonPrimary),
  :global(.cl-buttonPrimary),
  :global([class*="cl-buttonPrimary"]),
  :global([class*="cl-formButtonPrimary"]),
  :global(button[type="submit"][class*="cl-"]),
  :global(.cl-card button[type="submit"]),
  :global(.cl-modalContent button[type="submit"]),
  :global(.cl-alert button[type="submit"]) {
    justify-content: center !important;
  }

  /* Negative spacing to reduce gaps between form elements */
  .primary-button,
  :global(.cl-formButtonPrimary),
  :global(.cl-buttonPrimary),
  :global([class*="cl-buttonPrimary"]),
  :global([class*="cl-formButtonPrimary"]) {
    margin-top: -32px !important;
  }

  /* Apply negative margin to form container to reduce gap from header and footer */
  :global([data-clerk-element="form"]),
  :global(.cl-form) {
    margin-top: -12px !important;
    margin-bottom: -12px !important;
  }

  /* Apply negative margin to form fields (except first one) for consistent spacing */
  :global([data-clerk-element="formField"]:not(:first-of-type)),
  :global(.cl-formField:not(:first-of-type)),
  :global([class*="formField"]:not(:first-of-type)) {
    margin-top: -32px !important;
  }

  /* Style input fields to match app's search-input style */
  :global(input[type="email"]),
  :global(input[type="password"]),
  :global(input[type="text"]) {
    background: var(--color-gradient-gray) !important;
    box-shadow: var(--shadow-small) !important;
  }

  /* Sunset to Dusk gradient background */
  .sunset-dusk-gradient {
    background: linear-gradient(
      180deg,
      #FF6B6B 0%,
      #FF8E53 15%,
      #FFA07A 30%,
      #FFB347 45%,
      #FFD700 60%,
      #FF6347 75%,
      #8B4C7D 85%,
      #4A4A6A 95%,
      #2C2C54 100%
    );
    background-size: 100% 200%;
    animation: sunset-dusk-shift 20s ease infinite;
  }

  @keyframes sunset-dusk-shift {
    0% {
      background-position: 0% 0%;
    }
    50% {
      background-position: 0% 100%;
    }
    100% {
      background-position: 0% 0%;
    }
  }

  /* SpaceButton styling for back link */
  .space-button-link {
    will-change: transform;
    transition: box-shadow 0.125s ease-in-out;
    background: var(--color-gradient-gray);
    box-shadow: 0px -3px 0px 0px rgba(120, 118, 111, 0.2) inset;
  }

  .space-button-link:hover {
    transform: scale(1.002);
  }

  .space-button-link:active {
    filter: brightness(0.97);
    box-shadow: 
      0px -1px 0px 0px rgba(120, 118, 111, 0.2) inset,
      0px 1px 0px 0px rgba(120, 118, 111, 0.2) inset;
  }

  .space-button-link:active > div {
    translate: 0 0;
    transform: scale(0.98);
  }
</style>

